<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Big Hop</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Mapbox -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>

  <style>
    :root{
      --bg0:#0b0d10;
      --bg1:#0f1218;
      --card:rgba(255,255,255,0.055);
      --card2:rgba(255,255,255,0.035);
      --edge:rgba(255,255,255,0.10);
      --edge2:rgba(255,255,255,0.07);
      --text:#e9e6de;
      --muted:rgba(233,230,222,0.70);
      --muted2:rgba(233,230,222,0.55);
      --accent:#d8b46a;     /* warm gold */
      --accent2:#f3d8a0;
      --good:#6edc9a;
      --warn:#e6c55a;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 50% -80px, #1b2230 0%, var(--bg0) 55%, #07080b 100%);
      color:var(--text);
    }

    .wrap{
      max-width:1200px;
      margin:0 auto;
      padding:24px 18px 56px;
    }

    /* Header */
    header{
      text-align:center;
      padding:18px 0 8px;
    }
    header h1{
      margin:0;
      font-size: clamp(2.3rem, 5vw, 3.35rem);
      font-weight:650;
      letter-spacing:0.02em;
    }
    header .sub{
      margin:10px auto 0;
      max-width:820px;
      color:var(--muted);
      line-height:1.5;
      font-size:1.02rem;
    }

    /* Map card */
    .mapCard{
      margin-top:22px;
      background: linear-gradient(180deg, var(--card) 0%, var(--card2) 100%);
      border-radius:20px;
      box-shadow:
        inset 0 0 0 1px var(--edge2),
        0 18px 40px rgba(0,0,0,0.45);
      overflow:hidden;
    }

    .mapTopRow{
      display:flex;
      align-items:center;
      gap:10px;
      padding:14px 16px 0 16px;
      flex-wrap:wrap;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:9px 12px;
      border-radius:999px;
      background: rgba(255,255,255,0.06);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.09);
      color:var(--text);
      font-size:0.88rem;
      white-space:nowrap;
    }
    .pill b{font-weight:650}
    .pillDot{
      width:8px;height:8px;border-radius:50%;
      background: var(--accent);
      box-shadow: 0 0 10px rgba(216,180,106,0.55);
    }

    .moveBtn{
      margin-left:auto;
      padding:10px 16px;
      border-radius:999px;
      border:1px solid rgba(216,180,106,0.45);
      background: rgba(216,180,106,0.08);
      color: var(--text);
      cursor:pointer;
      font-weight:650;
      letter-spacing:0.02em;
    }
    .moveBtn:hover{
      background: rgba(216,180,106,0.14);
      border-color: rgba(216,180,106,0.60);
    }

    #map{
      height:420px;
      width:100%;
      margin-top:12px;
    }

    /* Bottom panel strip that sits on top of map */
    .mapBottomStrip{
      position:relative;
      padding:0 16px 14px 16px;
    }
    .stripInner{
      margin-top:-54px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-start;
      background: rgba(10,12,16,0.55);
      border-radius:16px;
      padding:10px 10px;
      backdrop-filter: blur(10px);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.08);
    }
    .stripTag{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:9px 12px;
      border-radius:999px;
      background: rgba(255,255,255,0.07);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.10);
      font-size:0.85rem;
      color:var(--text);
    }
    .stripTag .ico{opacity:0.95}
    .stripTag b{font-weight:700}

    /* 3 panels */
    .grid{
      margin-top:22px;
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:16px;
    }

    .panel{
      background: rgba(255,255,255,0.045);
      border-radius:18px;
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,0.075),
        0 12px 26px rgba(0,0,0,0.35);
      padding:14px 14px 12px 14px;
      min-height: 270px;
      display:flex;
      flex-direction:column;
    }

    .panelHeader{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:12px;
      margin-bottom:10px;
    }
    .panelHeader h3{
      margin:0;
      font-size:1.05rem;
      letter-spacing:0.01em;
    }
    .panelHeader .hint{
      color:var(--muted2);
      font-size:0.82rem;
      white-space:nowrap;
    }

    /* Scroll area */
    .scroll{
      overflow:auto;
      padding-right:6px;
      scrollbar-width: thin;
      scrollbar-color: rgba(255,255,255,0.18) transparent;
      flex:1;
    }
    .scroll::-webkit-scrollbar{width:8px}
    .scroll::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.14);border-radius:10px}

    /* Legendary search */
    .search{
      width:100%;
      background: rgba(255,255,255,0.06);
      border:1px solid rgba(255,255,255,0.10);
      border-radius:12px;
      padding:10px 12px;
      color:var(--text);
      outline:none;
      margin-bottom:10px;
    }
    .search::placeholder{color:rgba(233,230,222,0.45)}

    /* Rows */
    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:10px 10px;
      border-radius:14px;
      background: rgba(255,255,255,0.04);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
      margin-bottom:10px;
    }
    .left{
      display:flex;
      gap:10px;
      align-items:center;
      min-width:0;
    }
    .icon{
      width:34px;height:34px;border-radius:999px;
      display:grid;place-items:center;
      background: rgba(255,255,255,0.08);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.10);
      flex:0 0 auto;
      font-size:16px;
    }
    .txt{
      display:flex;
      flex-direction:column;
      min-width:0;
    }
    .title{
      font-weight:700;
      font-size:0.95rem;
      line-height:1.15;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 240px;
    }
    .subline{
      color:var(--muted2);
      font-size:0.82rem;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 240px;
      margin-top:2px;
    }

    .badge{
      padding:7px 10px;
      border-radius:999px;
      font-size:0.74rem;
      font-weight:800;
      letter-spacing:0.05em;
      border:1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      flex:0 0 auto;
    }
    .b-open{border-color: rgba(110,220,154,0.35); background: rgba(110,220,154,0.10)}
    .b-claimed{border-color: rgba(216,180,106,0.40); background: rgba(216,180,106,0.12)}
    .b-pending{border-color: rgba(230,197,90,0.40); background: rgba(230,197,90,0.10)}

    /* Ledger table-ish */
    .ledgerRow{
      display:grid;
      grid-template-columns: 74px 1fr 90px;
      gap:10px;
      align-items:center;
      padding:10px 10px;
      border-radius:14px;
      background: rgba(255,255,255,0.04);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
      margin-bottom:10px;
      font-size:0.9rem;
    }
    .when{color:var(--muted2); font-size:0.82rem}
    .who{font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .dist{justify-self:end; font-weight:800}
    .distPlus{color: var(--accent2)}

    /* Map markers */
    .legend-dot{
      width:8px;height:8px;border-radius:50%;
      background: rgba(216,180,106,0.18);          /* shadowed */
      box-shadow: 0 0 10px rgba(216,180,106,0.18);
      cursor: pointer;
    }
    .legend-dot.claimed{
      width:9px;height:9px;
      background: rgba(216,180,106,0.92);          /* illuminated */
      box-shadow: 0 0 18px rgba(216,180,106,0.70);
    }

    /* Mobile */
    @media (max-width: 980px){
      #map{height:380px}
      .grid{grid-template-columns: 1fr}
      .moveBtn{margin-left:0}
      .title,.subline{max-width: 62vw}
    }

    /* Mapbox UI soften */
    .mapboxgl-ctrl-logo, .mapboxgl-ctrl-attrib { opacity: 0.7; }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <h1>The Big Hop. üåç</h1>
      <div class="sub">
        A single message travels the world ‚Äî one hop at a time. Each hop leaves a permanent mark: a place, a distance, a moment.
      </div>
    </header>

    <section class="mapCard">
      <div class="mapTopRow">
        <div class="pill"><span class="pillDot"></span> Current pin: <b>Vancouver Island</b></div>
        <div class="pill">Total distance: <b>218,004 km</b></div>
        <div class="pill">Longest hop: <b>9,240 km</b></div>
        <button class="moveBtn">Move the message</button>
      </div>

      <div id="map"></div>

      <div class="mapBottomStrip">
        <div class="stripInner">
          <div class="stripTag"><span class="ico">üèÜ</span> Longest hop: <b>9,240 km</b></div>
          <div class="stripTag"><span class="ico">‚ûï</span> Latest add: <b>+2,931 km</b></div>
          <div class="stripTag"><span class="ico">üåç</span> Total: <b>218,004 km</b></div>
          <div class="stripTag"><span class="ico">üîÅ</span> Returning: <b>northstar</b> ¬∑ 14 hops</div>
        </div>
      </div>
    </section>

    <section class="grid">
      <!-- Legendary -->
      <div class="panel">
        <div class="panelHeader">
          <h3>üèõ Legendary Locations</h3>
          <div class="hint">searchable ¬∑ up to 50</div>
        </div>

        <input id="legendSearch" class="search" placeholder="Search legendary locations‚Ä¶ (e.g., White House, Antarctica)" />

        <div id="legendList" class="scroll"></div>
      </div>

      <!-- Ledger -->
      <div class="panel">
        <div class="panelHeader">
          <h3>üìú Ledger</h3>
          <div class="hint">recent confirmed hops</div>
        </div>
        <div id="ledgerList" class="scroll"></div>
      </div>

      <!-- Hall of Hop -->
      <div class="panel">
        <div class="panelHeader">
          <h3>üß≠ Hall of Hop</h3>
          <div class="hint">at a glance</div>
        </div>
        <div id="hallList" class="scroll"></div>
      </div>
    </section>
  </div>

  <script>
    // Token (public token is okay in HTML)
    mapboxgl.accessToken =
      'pk.eyJ1IjoidGhlYmlnaG9wIiwiYSI6ImNtbGZ4Zm9zZzA2M3EzZXB0c2ZnNXllZHkifQ.2I_oRh9f5AUmMzxEnMXCRQ';

    // ‚úÖ Style + ‚úÖ force flat map (no globe)
    // You can swap styles easily (see list below)
    const MAP_STYLE = 'mapbox://styles/mapbox/navigation-night-v1';

    const map = new mapboxgl.Map({
      container: 'map',
      style: MAP_STYLE,
      center: [-20, 25],
      zoom: 1.35,
      projection: 'mercator',    // üëà forces flat map (no globe)
      attributionControl: true
    });

    map.addControl(new mapboxgl.NavigationControl({ showCompass: false }), 'top-right');

    // --- Data (sample; we can expand to your 50 list next) ---
    const legendaryLocations = [
      { name: "The White House", icon:"üèõÔ∏è", holder:"POTUS_47", status:"CLAIMED", claimed:true, coords:[-77.0365, 38.8977] },
      { name: "Antarctica", icon:"‚ùÑÔ∏è", holder:"No current holder", status:"OPEN", claimed:false, coords:[0, -82] },
      { name: "Eiffel Tower", icon:"üóº", holder:"quietatlas", status:"PENDING", claimed:false, coords:[2.2945, 48.8584] },
      { name: "Area 51", icon:"üëΩ", holder:"No current holder", status:"OPEN", claimed:false, coords:[-115.8100, 37.2350] },
      { name: "Starbase (SpaceX)", icon:"üöÄ", holder:"No current holder", status:"OPEN", claimed:false, coords:[-97.1561, 25.9972] },
      { name: "Great Pyramid of Giza", icon:"üóø", holder:"No current holder", status:"OPEN", claimed:false, coords:[31.1342, 29.9792] },
      { name: "Mt. Everest", icon:"üèîÔ∏è", holder:"No current holder", status:"OPEN", claimed:false, coords:[86.9250, 27.9881] },
      { name: "Greenwich Meridian", icon:"üß≠", holder:"paperplane", status:"CLAIMED", claimed:true, coords:[0.0005, 51.4769] }
    ];

    const ledger = [
      { when:"Today", who:"northstar", dist:"+2,931 km" },
      { when:"2d", who:"paperplane", dist:"+1,204 km" },
      { when:"4d", who:"anonymous", dist:"+874 km" },
      { when:"6d", who:"returning participant", dist:"+412 km" }
    ];

    const hall = [
      { icon:"üèÜ", title:"Longest hop", sub:"9,240 km" },
      { icon:"üîÅ", title:"Most hops", sub:"northstar (14)" },
      { icon:"üåç", title:"Around the world", sub:"paperplane" },
      { icon:"üèõÔ∏è", title:"Landmark hunter", sub:"northstar (3)" }
    ];

    // --- Render Legendary List ---
    const legendListEl = document.getElementById('legendList');
    function badgeClass(status){
      if(status === "OPEN") return "badge b-open";
      if(status === "CLAIMED") return "badge b-claimed";
      if(status === "PENDING") return "badge b-pending";
      return "badge";
    }

    function renderLegend(filter=""){
      const q = filter.trim().toLowerCase();
      legendListEl.innerHTML = "";

      legendaryLocations
        .filter(x => x.name.toLowerCase().includes(q))
        .forEach(x => {
          const row = document.createElement('div');
          row.className = 'row';
          row.innerHTML = `
            <div class="left">
              <div class="icon">${x.icon}</div>
              <div class="txt">
                <div class="title">${x.name}</div>
                <div class="subline">${x.status === "CLAIMED" ? `Held by ${x.holder}` : x.holder}</div>
              </div>
            </div>
            <div class="${badgeClass(x.status)}">${x.status}</div>
          `;
          legendListEl.appendChild(row);
        });
    }

    document.getElementById('legendSearch').addEventListener('input', (e)=>renderLegend(e.target.value));
    renderLegend("");

    // --- Render Ledger ---
    const ledgerEl = document.getElementById('ledgerList');
    ledger.forEach(x=>{
      const r = document.createElement('div');
      r.className = 'ledgerRow';
      r.innerHTML = `
        <div class="when">${x.when}</div>
        <div class="who">${x.who}</div>
        <div class="dist distPlus">${x.dist}</div>
      `;
      ledgerEl.appendChild(r);
    });

    // --- Render Hall ---
    const hallEl = document.getElementById('hallList');
    hall.forEach(x=>{
      const row = document.createElement('div');
      row.className = 'row';
      row.innerHTML = `
        <div class="left">
          <div class="icon">${x.icon}</div>
          <div class="txt">
            <div class="title">${x.title}</div>
            <div class="subline">${x.sub}</div>
          </div>
        </div>
        <div class="badge b-claimed">LIVE</div>
      `;
      hallEl.appendChild(row);
    });

    // --- Map legendary dots (shadowed; illuminate if claimed) ---
    map.on('load', () => {
      legendaryLocations.forEach(loc => {
        const el = document.createElement('div');
        el.className = loc.claimed ? 'legend-dot claimed' : 'legend-dot';
        el.title = loc.name; // hover label (native)

        new mapboxgl.Marker(el)
          .setLngLat(loc.coords)
          .setPopup(new mapboxgl.Popup({ offset: 12 }).setText(loc.name)) // click label too
          .addTo(map);
      });
    });

    // --- STYLE SWAPS (pick one by replacing MAP_STYLE above) ---
    // 'mapbox://styles/mapbox/dark-v11'                 // darker, simpler
    // 'mapbox://styles/mapbox/navigation-night-v1'      // night, clean roads
    // 'mapbox://styles/mapbox/light-v11'                // if you ever want parchment / light
    // 'mapbox://styles/mapbox/satellite-streets-v12'    // cinematic but ‚Äúbusier‚Äù
  </script>
</body>
</html>
